# Game Health Checker (Sentinel)

A real-time game server status monitor built with Rust. It features a Backend (Axum) that checks server health and pushes updates via SSE, and a Frontend (Leptos) that displays the live dashboard.

## Project Structure

This is a Cargo Workspace containing:

- **`backend/`**: Axum server, server monitoring logic, and SSE broadcaster.
- **`frontend/`**: Leptos (CSR) web application compiled to WebAssembly.
- **`shared/`**: Common data structures (e.g., `ServerStatus`) shared between backend and frontend.

## Prerequisites

1. **Rust**: [Install Rust](https://www.rust-lang.org/tools/install).
2. **Trunk**: Required to build the frontend.

    ```bash
    cargo install trunk
    ```
    *Note: Ensure `~/.cargo/bin` is in your PATH. If you see `command not found: trunk`, try running `export PATH="$HOME/.cargo/bin:$PATH"`.*

3. **Wasm Target**: Required for frontend compilation.

    ```bash
    rustup target add wasm32-unknown-unknown
    ```

## Quick Start

### 1. Configure Servers

Edit `servers.toml` in the root directory to add your game servers.

```toml
[[servers]]
name = "My Survival World"
host = "127.0.0.1"
port = 25565
type = "Minecraft"
```

### 2. Build Frontend

Open a terminal in the `frontend` directory:

```bash
cd frontend
trunk build --release
```

> **Why Trunk?**
> Browsers cannot run raw Rust code. **Trunk** is a build tool that runs the Rust compiler to generate WebAssembly (`.wasm`), creates the necessary JavaScript "glue" code to bridge the browser and Rust, and bundles assets (like `index.html`) into the `dist/` folder.

### 3. Run Backend

Open a terminal in the `backend` directory:

```bash
cd backend
cargo run
```

The server will start on `http://0.0.0.0:3000`. The backend is configured to serve the static frontend files from the `frontend/dist` directory generated by Trunk.

## Architecture & Technologies

### Backend

- **Axum**: High-performance web framework used largely for the SSE endpoint.
- **Tokio**: Async runtime handling concurrent server checks.
- **Gamedig (v0.8)**: Used for querying game servers (Minecraft Query, etc.).
  - *Compatibility Note*: Gamedig 0.8 removed specific support for the TShock protocol. This project implements a raw TCP connection check for **Terraria** servers as a fallback.
- **SSE**: Real-time updates utilize Server-Sent Events to push status changes to the dashboard immediately, avoiding inefficient polling.

### Frontend

- **Leptos**: A modern, performant reactive framework for building web apps in Rust. We use Client-Side Rendering (CSR).
- **TailwindCSS**: CSS framework used for styling (loaded via CDN in `index.html`).
